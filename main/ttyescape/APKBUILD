# Maintainer: Caleb Connolly <caleb@connolly.tech>
pkgname=ttyescape
pkgver=1.0.0
pkgrel=0
pkgdesc="Daemon to allow users to escape to a tty"
url="https://gitlab.com/postmarketOS/ttyescape"
arch="noarch"
license="GPL-3.0-or-later"
depends="hkdm buffyboard terminus-font kbd"
install="$pkgname.post-install"
subpackages="$pkgname-openrc"
source="
	$url/-/archive/$pkgver/$pkgname-$pkgver.tar.gz
	etc-conf-d-ttyescape.conf
"
options="!check"

package() {
	install -Dm755 "$srcdir"/"$pkgname-$pkgver"/togglevt.sh \
		"$pkgdir"/usr/bin/togglevt.sh

	install -Dm755 "$srcdir"/"$pkgname-$pkgver"/ttyescape-hkdm.toml \
		"$pkgdir"/etc/hkdm/config.d/ttyescape.toml

	install -Dm755 "$srcdir"/etc-conf-d-ttyescape.conf \
		"$pkgdir"/etc/conf.d/ttyescape.conf
}

sha512sums="
684b446d28bf041b843127ea67e52d1f56e7f42a40ffff5999547f5a4300e0fb9592040df639e9da314379c412cd20315556a8cd7c8558a4c8599a8a560f3341  ttyescape-1.0.0.tar.gz
ac06c2ae2b3b8404d6ed79a046b175abbeb2360033edcaa22c21e1a61c68913e58013e9200ee5b786eee9020a2c78d1bda09c72d87ea0998bf6eeb71da015a2f  etc-conf-d-ttyescape.conf
"
